#pragma config(Sensor, S1,     lightSensor,    sensorLightActive)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

int black,white;

task main()
{

	//TODO calibrate what black and white actually are
	black = 32;
	white = 66;

	float midpoint = (white-black)/2 + black;

	float integral=0,derivative=0;

	float currentError = 0, previousError = 0;
	float currentValue = 0;
	float kp = 1, ki = 0.005, kd = 0;
	float output;

	while(1){

			currentValue = SensorValue(lightSensor);

			previousError = currentError;

			currentError = midpoint - currentValue;
			integral = integral + currentError;
			derivative = currentError - previousError ;

			output = kp * currentError + ki * integral + kd * derivative;


			motor[motorC] = 20 + output;
			motor[motorA] = 20 - output;


	}


}
